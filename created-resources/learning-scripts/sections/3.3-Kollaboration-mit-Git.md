# 3.3 Kollaboration mit Git: Ein einfacher Workflow für das Team

In der Teamarbeit ist die Versionskontrolle mit Git das zentrale Nervensystem des Projekts. Ohne einen klaren, von allen verstandenen Prozess kommt es schnell zu Chaos, Code-Verlust und Frustration. Ein einfacher, aber robuster **Feature-Branch-Workflow** ist für Projekte wie dieses ideal.

---

### 3.3.1. Die Branching-Strategie: Ordnung im Repository

Das Ziel ist, den `main`-Branch immer stabil und lauffähig zu halten. Niemand arbeitet direkt auf dem `main`-Branch.

1.  **Der `main`-Branch:**
    *   Dieser Branch repräsentiert den offiziellen, stabilen Stand des Projekts.
    *   Code gelangt nur über einen **Pull Request** auf den `main`-Branch.

2.  **Feature-Branches:**
    *   Für jede neue User Story (oder jeden Bugfix) wird ein neuer Branch vom aktuellen `main`-Branch erstellt.
    *   **Namenskonvention:** Der Branch-Name sollte aussagekräftig sein und idealerweise die Nummer des zugehörigen Tickets/Issues enthalten, z.B. `feature/15-user-registration` oder `fix/21-login-button-bug`.
    *   Die gesamte Entwicklungsarbeit für dieses Feature findet **ausschließlich** in diesem Branch statt.

---

### 3.3.2. Der Workflow in der Praxis: Schritt für Schritt erklärt

Stellen Sie sich das Git-Repository wie den Hauptbauplan für ein Haus vor, der auf einem zentralen Server liegt (das ist das `origin` Repository auf GitHub). Der `main`-Branch ist die offizielle, freigegebene Version dieses Bauplans. Niemand darf direkt auf diesem offiziellen Plan herumkritzeln.

Stattdessen kopiert sich jeder Entwickler den offiziellen Plan (`main`-Branch), legt eine transparente Pauspapier-Folie darüber (das ist der `feature`-Branch) und zeichnet seine Änderungen auf diese Folie. So bleibt der Originalplan unberührt.

---

#### Phase 1: Vorbereitung – Die eigene "Werkstatt" einrichten

Bevor Sie mit einer neuen Aufgabe (User Story) beginnen, müssen Sie sicherstellen, dass Ihre lokale Kopie des Bauplans auf dem neuesten Stand ist.

**1. Zum lokalen Hauptbauplan wechseln:**
Sie gehen in Ihrem lokalen Projektordner zum `main`-Branch.
```bash
git checkout main
```
*   **`git checkout`** ist wie das Aufschlagen einer bestimmten Seite im Bauplanbuch. `main` ist die Seite mit dem offiziellen Plan.

**2. Den neuesten Plan vom Server holen:**
Sie synchronisieren Ihren lokalen `main`-Branch mit dem zentralen Server-Repository (`origin`).
```bash
git pull origin main
```
*   **`git pull`** "zieht" sich die neuesten Änderungen vom Server. `origin` ist der Standardname für das Server-Repository (z.B. auf GitHub), und `main` ist der Branch, den Sie aktualisieren möchten. Jetzt ist Ihr lokaler `main`-Branch identisch mit dem auf dem Server.

---

#### Phase 2: Die Arbeit am Feature – Auf der eigenen "Pauspapier-Folie" zeichnen

Jetzt beginnen Sie mit Ihrer eigentlichen Aufgabe, z.B. der "Benutzerregistrierung" (Task #15).

**3. Eine neue Folie (Feature-Branch) anlegen:**
Sie erstellen einen neuen Branch für Ihre Aufgabe. Dieser Branch ist eine exakte Kopie des aktuellen `main`-Branches, auf der Sie nun arbeiten können.
```bash
git checkout -b feature/15-user-registration
```
*   **`git checkout -b`** ist ein kombinierter Befehl: `-b` steht für "branch" und erstellt einen *neuen* Branch mit dem angegebenen Namen. Gleichzeitig wechseln (`checkout`) Sie direkt in diesen neuen Branch. Der Name `feature/15-user-registration` ist eine Konvention: Er sagt, es ist ein "Feature", bezieht sich auf Task "15" und beschreibt, worum es geht.

**4. Entwickeln und Änderungen speichern (Committen):**
Sie schreiben nun Ihren Code. Jedes Mal, wenn Sie einen kleinen, logischen Arbeitsschritt abgeschlossen haben (z.B. den Controller erstellt), speichern Sie diese Änderung in einem "Commit".

*   **Änderungen zum "Sammelkorb" hinzufügen:**
    ```bash
    git add .
    ```
    **`git add .`** nimmt alle geänderten Dateien und legt sie in einen "Sammelkorb" (die "Staging Area"). Damit sagen Sie Git, welche Änderungen Sie im nächsten Commit speichern möchten.

*   **Den Inhalt des Sammelkorbs festschreiben:**
    ```bash
    git commit -m "feat: Add registration controller and service"
    ```
    **`git commit -m`** nimmt alles aus dem Sammelkorb und speichert es als permanenten Schnappschuss (Commit) in Ihrem Branch. Die `-m`-Option erlaubt es, eine aussagekräftige Nachricht (`message`) direkt mitzugeben. Eine gute Nachricht beginnt oft mit einem Typ (z.B. `feat` für Feature, `fix` für Bugfix) und beschreibt kurz, was getan wurde.

**5. Die eigene Arbeit sichern und teilen:**
Ihre Commits existieren bisher nur auf Ihrem lokalen Computer. Um sie zu sichern und für andere Teammitglieder sichtbar zu machen, laden Sie Ihren Branch auf den Server hoch.
```bash
git push -u origin feature/15-user-registration
```
*   **`git push`** "schiebt" Ihre Commits zum Server (`origin`).
*   Die Option **`-u`** (kurz für `--set-upstream`) müssen Sie nur beim allerersten Push dieses Branches verwenden. Sie erstellt eine Verknüpfung zwischen Ihrem lokalen Branch und dem neuen Branch auf dem Server. Zukünftig reicht ein einfaches `git push`.

---

#### Phase 3: Das Feature integrieren – Den Bauplan offiziell machen

Wenn Sie mit Ihrer Aufgabe fertig sind und alles lokal getestet haben, ist es Zeit, Ihre Änderungen in den offiziellen `main`-Branch zu überführen.

**6. Einen "Antrag auf Zusammenführung" (Pull Request) stellen:**
Gehen Sie auf die Weboberfläche Ihrer Git-Plattform (z.B. GitHub). Dort sehen Sie einen Hinweis, dass Sie einen neuen Branch gepusht haben, und können mit einem Klick einen **Pull Request (PR)** erstellen.
*   **Was ist ein PR?** Ein PR ist ein formaler Antrag, Ihren `feature/15-user-registration`-Branch in den `main`-Branch zu integrieren. Sie geben ihm einen Titel und eine Beschreibung, was Sie geändert haben.

**7. Code-Review durch das Team:**
Ein Pull Request ist auch eine Einladung zur Diskussion. Mindestens ein anderes Teammitglied sollte sich Ihren Code ansehen.
*   **Ziel (Vier-Augen-Prinzip):** Findet jemand einen Fehler? Gibt es eine einfachere Lösung? Ist der Code verständlich?
*   Feedback wird direkt im PR als Kommentar hinterlassen. Falls Änderungen nötig sind, machen Sie einfach neue Commits in Ihrem Feature-Branch und pushen diese. Der PR aktualisiert sich automatisch.

**8. Zusammenführen (Mergen) und Aufräumen:**
Wenn alle zufrieden sind und der PR genehmigt ("approved") wurde, klickt ein Verantwortlicher auf den "Merge"-Button.
*   **Was passiert beim Mergen?** Git fügt alle Commits aus Ihrem Feature-Branch sauber in den `main`-Branch ein. Ihre Änderungen sind nun Teil des offiziellen Codes.
*   **Aufräumen:** Nach dem Merge kann der Feature-Branch auf dem Server gelöscht werden, da seine Arbeit getan ist.

> <span style="font-size: 1.5em">:warning:</span> **Was tun bei Konflikten?** Wenn ein Kollege den `main`-Branch geändert hat, während Sie an Ihrem Feature gearbeitet haben, kann es zu einem "Merge-Konflikt" kommen. Git weiß dann nicht, welche Änderung die richtige ist. Um das zu lösen, holen Sie sich die neuesten Änderungen vom `main`-Branch in Ihren Feature-Branch (`git pull origin main`). Git zeigt Ihnen die Konflikte direkt in den Dateien an. Sie müssen die Dateien manuell bearbeiten, die Konfliktmarkierungen entfernen, die korrekte Version speichern und das Ergebnis committen. Erst dann können Sie den PR abschließen.
